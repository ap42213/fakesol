FROM node:20-slim

WORKDIR /app/server

# Install server dependencies (includes tsx)
COPY server/package*.json ./
RUN npm install

# Copy server source
COPY server/ ./

# Run refill script
CMD ["npx", "tsx", "scripts/refillTreasury.ts"]
